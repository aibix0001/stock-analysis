# üìã Vollst√§ndige Anforderungen - Aktienanalyse-√ñkosystem

## üè¢ Gesamtarchitektur: 4 Teilprojekte + 8 Kernmodule

Das **aktienanalyse-√∂kosystem** besteht aus **4 Teilprojekten**, die jeweils in **modulare Architekturen** unterteilt sind:

```
üèóÔ∏è aktienanalyse-√∂kosystem/
‚îú‚îÄ‚îÄ üìà aktienanalyse (Basis-System)           # 4 Module
‚îú‚îÄ‚îÄ üßÆ aktienanalyse-auswertung (Analytics)   # 4 Module  
‚îú‚îÄ‚îÄ üíº aktienanalyse-verwaltung (Trading)     # 8 Module
‚îî‚îÄ‚îÄ üåê data-web-app (Frontend)               # 6 Module
                                             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                                             22 Module Total
```

---

## üìà **PROJEKT 1: aktienanalyse (Basis-System)**

### **Zweck**: Core-Datensammlung, Scoring-Engine und Technical Analysis
### **Status**: Bestehend, wird modularisiert

### Module 1: üîç **data-sources Modul**

#### Datenquellen-Integration
- **Alpha Vantage Plugin**: Fundamentaldaten und EOD-Kurse
- **Yahoo Finance Plugin**: Real-time Kurse und Historische Daten  
- **FRED Economic Plugin**: Makro√∂konomische Indikatoren
- **Bitpanda API Plugin**: Real-time Market Data und Enhanced Analytics ‚≠ê
- **Plugin Manager**: Dynamisches Laden und Konfiguration von Datenquellen

#### Data Collection Pipeline
- Multi-Source Data Aggregation mit Konflikaufl√∂sung
- Rate-Limited API-Zugriffe (verschiedene Limits pro Source)
- Data Quality Validation und Plausibilit√§tspr√ºfungen
- Fallback-Strategien bei API-Ausf√§llen
- Historical Data Backfill f√ºr neue Instrumente

### Modul 2: üßÆ **scoring-engine Modul**

#### Technical Analysis Engine
- **Technical Indicators**: RSI, MACD, Moving Averages, Bollinger Bands
- **Advanced Indicators**: Stochastic, Williams %R, Commodity Channel Index
- **Candlestick Pattern Recognition**: Doji, Hammer, Engulfing, etc.
- **Support/Resistance Detection**: Automatische Level-Erkennung
- **Trend Analysis**: Multi-Timeframe Trend-Bestimmung

#### Machine Learning Ensemble
- **XGBoost Models**: Gradient Boosting f√ºr Price Prediction
- **LSTM Networks**: Long Short-Term Memory f√ºr Sequence Prediction
- **Transformer Models**: Attention-Mechanism f√ºr Multi-Asset Correlation
- **Random Forest**: Ensemble Learning f√ºr Feature Importance
- **Model Validation**: Walk-Forward Analysis und Backtesting

#### Event-Driven Analysis
- **Earnings Events**: Automatische Earnings-Calendar Integration
- **FDA Approvals**: Biotech/Pharma Event-Tracking
- **M&A Events**: Merger & Acquisition Impact Analysis
- **Economic Events**: FOMC, ECB Decisions, Employment Data
- **News Sentiment**: NLP-basierte News-Impact-Bewertung

#### Bitpanda-Enhanced Analytics ‚≠ê
- **Liquidity Score**: Order Book Depth Analysis
- **Volume-Weighted Momentum**: Real-time Momentum mit Volume-Weighting
- **Unusual Volume Detection**: Anomalie-Erkennung im Trading-Volume
- **Cross-Market Correlation**: Bitcoin-Correlation und Market-Beta
- **Real-time Signal Generation**: Live-Trading-Signale

### Modul 3: üóÑÔ∏è **data-layer Modul**

#### Database Management
- **aktienanalyse.db**: Hauptdatenbank f√ºr Stock-Data und Scores
- **Schema Manager**: Database Migrations und Versionskontrolle
- **Query Optimizer**: Performance-optimierte Abfragen
- **Bitpanda Cache**: High-frequency Data Cache f√ºr Real-time Updates ‚≠ê
- **Data Retention**: Automatische Archivierung alter Daten

#### Cross-Database Integration
- **Cross-DB Queries**: Joins zwischen aktienanalyse.db und anderen DBs
- **Data Synchronization**: Real-time Sync mit anderen Teilprojekten
- **Backup Management**: Automatische Backups und Recovery
- **Performance Monitoring**: Query-Performance und Index-Optimierung

### Modul 4: üåê **northbound-api Modul**

#### REST API Layer
- **Stock Data API**: CRUD-Operationen f√ºr Stock-Daten
- **Scoring API**: Zugriff auf Technical Analysis Scores
- **Real-time Updates**: WebSocket f√ºr Live-Score-Updates
- **Bitpanda Proxy**: Rate-Limited Proxy f√ºr Bitpanda Market Data ‚≠ê
- **Health Checks**: API Health und Performance Monitoring

#### API Features
- **OpenAPI Documentation**: Swagger-basierte API-Docs
- **Rate Limiting**: API-Usage-Limits f√ºr verschiedene Endpunkte
- **Caching Layer**: Redis-basiertes API-Response-Caching
- **Authentication**: Simple API-Key f√ºr lokales System
- **Monitoring**: API-Usage-Analytics und Error-Tracking

---

## üßÆ **PROJEKT 2: aktienanalyse-auswertung (Analytics & Reporting)**

### **Zweck**: Performance-Analyse, Backtesting und professionelle Berichtserstellung
### **Status**: Bestehend, wird modularisiert

### Modul 5: üìä **performance-analytics Modul**

#### Portfolio Performance Analysis
- **ROI Calculation**: Return on Investment mit verschiedenen Methoden
- **Sharpe Ratio**: Risk-adjusted Return Berechnung
- **Maximum Drawdown**: Worst-Case Scenario Analysis
- **Sortino Ratio**: Downside-Risk-adjusted Performance
- **Calmar Ratio**: Return vs. Maximum Drawdown

#### Risk Metrics Engine
- **Value at Risk (VaR)**: 95%/99% VaR Berechnung
- **Beta Calculation**: Market-Beta f√ºr einzelne Positionen
- **Correlation Analysis**: Asset-Correlation-Matrix
- **Volatility Analysis**: Historical und Implied Volatility
- **Stress Testing**: Portfolio-Performance in Extremszenarien

#### Backtesting Engine
- **Historical Validation**: Strategy-Backtesting mit Historical Data
- **Walk-Forward Analysis**: Out-of-Sample Validation
- **Monte Carlo Simulation**: Probabilistische Scenario-Analyse
- **Strategy Comparison**: Multiple Strategy Performance-Vergleich
- **Transaction Cost Integration**: Realistic Trading Cost Simulation

#### Benchmark Comparison
- **Index Comparison**: Performance vs. DAX, S&P 500, MSCI World
- **Sector Comparison**: Performance vs. Sektor-ETFs
- **Peer Comparison**: Performance vs. √§hnliche Aktien
- **Risk-adjusted Benchmarking**: Alpha und Beta vs. Benchmarks

### Modul 6: üìã **reporting-engine Modul**

#### Multi-Format Report Generation
- **Excel Generator**: Excel MCP Integration f√ºr automatische Reports ‚≠ê
- **PowerPoint Generator**: PowerPoint MCP f√ºr Pr√§sentationen ‚≠ê
- **Access Database**: Access MCP f√ºr Datenbank-Reports ‚≠ê
- **PDF Exporter**: Client-ready PDF-Reports
- **HTML Reports**: Interactive Web-Reports

#### Report Templates
- **Executive Summary**: High-level Performance Overview
- **Detailed Analytics**: Comprehensive Performance Breakdown
- **Risk Assessment**: Risk-focused Reports f√ºr Compliance
- **Tax Reports**: Steuerrelevante Berichte (KESt, SolZ, KiSt)
- **Custom Reports**: Configurable Report Templates

#### Automated Reporting
- **Scheduled Reports**: Daily/Weekly/Monthly automated Generation
- **Email Distribution**: Automatic Report Distribution
- **Report Archiving**: Systematic Report Storage und Versionierung
- **Template Management**: Dynamic Report Template Configuration

### Modul 7: üîÑ **cross-system-sync Modul**

#### Data Integration
- **aktienanalyse Connector**: Live-Sync mit Basis-System
- **depot Connector**: Integration mit Trading-System  
- **Data Synchronizer**: Bi-directional Data Sync
- **Conflict Resolution**: Automatische Data-Conflict-Behandlung
- **Event-driven Updates**: Real-time Cross-System-Updates

#### Performance Correlation
- **Cross-System Analytics**: Performance-Vergleich zwischen allen Systemen
- **Signal Validation**: Validierung von aktienanalyse-Signalen mit Trading-Results
- **Feedback Loop**: Trading-Performance ‚Üí aktienanalyse Model-Improvement
- **ROI Attribution**: Performance-Attribution nach Signalquellen

### Modul 8: üåê **analytics-api Modul**

#### Analytics API Layer
- **Performance Endpoints**: RESTful Performance-Metrics API
- **Report Generation API**: Programmatic Report Creation
- **Cross-system Queries**: Multi-Database Query API
- **Real-time Analytics**: WebSocket f√ºr Live-Analytics
- **Export APIs**: Data Export in verschiedenen Formaten

---

## üíº **PROJEKT 3: aktienanalyse-verwaltung (Trading & Depot Management)**

### **Zweck**: Depot-Management mit automatischer Orderausf√ºhrung
### **Status**: Neu entwickelt mit modularer Architektur

### Modul 9: üìä **core-depot Modul**

#### Position Management
- **Position CRUD**: Create, Read, Update, Delete von Positionen
- **Multi-Asset Support**: Aktien, ETFs, Kryptow√§hrungen √ºber Bitpanda
- **Order State Machine**: Kompletter Order-Lifecycle-Management
- **Trade History**: Vollst√§ndige Trade-Historie mit Metadaten
- **Portfolio Aggregation**: Real-time Portfolio-√úbersicht

#### Account Management
- **Account Balances**: Cash-Positionen und verf√ºgbare Mittel
- **Multi-Currency**: EUR/USD Support f√ºr internationale Assets
- **Margin Calculations**: Available Buying Power Berechnung
- **Portfolio Snapshots**: Historische Portfolio-Performance-Tracking

### Modul 10: üßÆ **performance-engine Modul**

#### Enhanced Performance Calculation
- **Brutto-Performance**: Reine Kursdifferenz ohne Nebenkosten
- **Netto-Performance**: Inklusive Steuern und Geb√ºhren
- **Steuerberechnung nach deutschem Steuerrecht (2025)**:
  - **25% Kapitalertragsteuer** + **5,5% Solidarit√§tszuschlag**
  - **Optional 8%/9% Kirchensteuer** (evangelisch/katholisch)
  - **KEINE Optimierungen**: Keine Abschreibungen oder Loss-Harvesting
  - **Standard-Berechnung**: Einfache lineare Steuerberechnung

#### Performance Ranking & Sorting
- **Zeitraum-normalisierte Performance**: Fair Comparison verschiedener Haltedauern
- **Multi-Kriterien-Ranking**: 40% Netto + 30% Annualisiert + 30% Risk-Adjusted
- **Automatische Depot-Sortierung**: Dynamisches Ranking nach Performance
- **Performance Heatmap**: Visuelle Darstellung von Winners/Losers
- **Rebalancing Suggestions**: Portfolio-Optimierung basierend auf Performance

### Modul 11: üóÑÔ∏è **data-layer Modul**

#### Database Architecture
- **depot.db**: Separate Datenbank mit 20 Tabellen f√ºr Trading-relevante Daten
- **Core Tables**: Depots, Positions, Orders, Trades, Instruments, Portfolio-Snapshots
- **Performance Tables**: Trade-Costs, Tax-Calculations, Dividends, Currency-Rates
- **Integration Tables**: Broker-Sync-Log, Import-Queue, Cross-System-Rankings

#### Database Operations
- **Repository Pattern**: Einheitliche Database-Abstraction
- **Schema Migrations**: Automated Database Schema Evolution
- **Query Optimization**: Performance-optimierte Queries f√ºr Rankings
- **Backup Management**: Automated Backup und Recovery Strategies

### Modul 12: üîÑ **cross-system-sync Modul**

#### Cross-System Intelligence
- **4-System Analysis**: aktienanalyse + auswertung + verwaltung + data-web-app
- **Performance Correlation**: Cross-System Performance-Matrix
- **Auto-Import Logic**: Intelligente Aktien-√úbernahme mit Multi-Kriterien-Algorithmus
- **Watchlist Mode**: Import mit 0 Bestand f√ºr sp√§tere Kaufentscheidungen

#### Synchronization Engine
- **Scheduled Sync**: Periodische Synchronisation mit anderen Projekten
- **Event-driven Sync**: Real-time Updates √ºber Event-Bus
- **Data Mapping**: aktienanalyse.db ‚Üî depot.db Mapping
- **Conflict Resolution**: Automatic Handling von Data-Konflikten

### Modul 13: üì° **broker-integration Modul**

#### Bitpanda Pro Integration
- **REST API Client**: Full Bitpanda Pro API Integration
- **WebSocket Manager**: Real-time Market Data und Account Updates
- **Order Types**: Market, Limit, Stop-Limit, GtC, GtT, IoC, FoK
- **Rate Limiting**: 120 Requests/Minute Compliance
- **Error Handling**: Robust Error Recovery und Retry Logic

#### Event-Driven Architecture
- **Order Events**: trading.order.* Event Publishing f√ºr Cross-System Updates
- **Market Data Events**: market.data.* f√ºr Live-Updates
- **Cost Events**: trading.cost.* f√ºr Performance-Engine Integration
- **Health Events**: system.health.broker.* f√ºr Monitoring

#### Broker Abstraction Layer
- **Generic Interface**: Multi-Broker-Support Vorbereitung
- **Plugin Architecture**: Dynamisches Laden verschiedener Broker-Adapter
- **Failover Support**: Automatic Failover zwischen Brokern (zuk√ºnftig)

### Modul 14: üåê **northbound-api Modul**

#### RESTful API Design
- **Depot Endpoints**: Portfolio-Management API
- **Performance API**: Brutto/Netto-Performance mit Zeitraum-Filterung
- **Order Management API**: Buy/Sell Order-Execution
- **Ranking API**: Position-Rankings mit konfigurierbaren Kriterien
- **Cross-System API**: aktienanalyse-Vergleichs-Endpoints

#### Real-time Integration
- **WebSocket Hub**: Real-time Updates f√ºr Portfolio-√Ñnderungen
- **Server-Sent Events**: Live Order-Status Updates
- **API Gateway**: Zentraler API-Router f√ºr alle Endpoints
- **OpenAPI Documentation**: Swagger f√ºr Frontend-Integration

### Modul 15: ‚öôÔ∏è **service-foundation Modul**

#### Infrastructure Support
- **Systemd Integration**: Service-Management f√ºr dauerhafte Ausf√ºhrung
- **Configuration Management**: Zentrale YAML/JSON-Konfiguration
- **Logging System**: Strukturierte Logs mit Log-Rotation
- **Health Monitoring**: System Health-Checks und Alerting

#### Task Management
- **Scheduler Service**: Cron-like Task-Scheduling
- **Notification Hub**: Email/Push Notifications f√ºr wichtige Events
- **Backup Service**: Automated Database Backups
- **Deployment Support**: LXC Container-Integration

### Modul 16: üß™ **testing-framework Modul**

#### Test Infrastructure
- **Mock Broker**: Bitpanda Pro Mock-Server f√ºr Development
- **Unit Tests**: Comprehensive Test-Suite f√ºr alle Module
- **Integration Tests**: Cross-Module und Cross-System Tests
- **Performance Tests**: Load-Testing f√ºr API-Endpoints

#### Testing Strategies
- **End-to-End Tests**: Complete Trading-Workflow Tests
- **Test Data Management**: Realistic Test-Datasets
- **Continuous Testing**: Automated Test-Execution
- **Test Reporting**: Comprehensive Test-Results und Coverage

---

## üåê **PROJEKT 4: data-web-app (Unified Frontend)**

### **Zweck**: Zentrales Web-Dashboard f√ºr alle Teilprojekte
### **Status**: Bestehend, wird als einheitliche Frontend-L√∂sung ausgebaut

### Modul 17: üé® **frontend-core Modul**

#### React Framework
- **Dashboard Framework**: Wiederverwendbare Dashboard-Komponenten
- **Chart Library**: Einheitliche Chart-Komponenten (D3.js, Chart.js)
- **Component Library**: Shared UI-Components f√ºr alle Module
- **Theme System**: Einheitliches Design-System und Theming
- **Responsive Design**: Mobile-first Design f√ºr alle Devices

#### Authentication & Navigation
- **Single-User Authentication**: Einfache Session-basierte Authentifizierung f√ºr einen Benutzer (mdoehler)
- **Project Navigation**: Nahtlose Navigation zwischen allen 4 Projektbereichen
- **Session Management**: Secure Session-Handling f√ºr einzelnen Benutzer

### Modul 18: üìà **aktienanalyse-ui Modul**

#### Stock Analysis Dashboard
- **Stock Screening**: Top-10 Analysis UI mit Filtering
- **Scoring Dashboard**: Technical Analysis Visualisierung
- **Real-time Charts**: Live-Charts mit Bitpanda Real-time Data
- **Signal Display**: Trading-Signale und Recommendations
- **Backtesting UI**: Interactive Backtesting Results

#### Configuration Interface
- **Data Source Config**: Plugin-Konfiguration f√ºr verschiedene APIs
- **Model Parameters**: ML-Model Parameter-Tuning UI
- **Alert Configuration**: Custom Alert-Setup f√ºr Signals
- **Export Tools**: Data Export in verschiedenen Formaten

### Modul 19: üßÆ **analytics-ui Modul**

#### Performance Dashboard
- **Portfolio Performance**: Interactive Performance-Charts
- **Risk Metrics Display**: VaR, Sharpe Ratio, Beta Visualisierung
- **Benchmark Comparison**: Performance vs. Indices und Peers
- **Attribution Analysis**: Performance-Attribution nach verschiedenen Faktoren

#### Report Management
- **Report Viewer**: Interactive Display f√ºr Generated Reports
- **Report Scheduling**: Configuration f√ºr Automated Reports
- **Template Management**: Custom Report Template-Editor
- **Export Options**: Multi-Format Report Export

### Modul 20: üíº **depot-ui Modul**

#### Portfolio Management Interface
- **Portfolio Overview**: Real-time Depot-√úbersicht mit Live-Updates
- **Position Details**: Detaillierte Position-Ansicht mit Performance-Metrics
- **Performance Ranking**: Interactive Performance-Ranking mit Sorting
- **Tax Calculator**: Interactive Steuerberechnung (Brutto/Netto)

#### Trading Interface
- **Order Management**: Buy/Sell Order-Interface mit Bitpanda Integration
- **Order History**: Historical Order-Display mit Status-Tracking
- **Watchlist Management**: Interactive Watchlist mit 0-Bestand-Positionen
- **Real-time Updates**: Live Portfolio-Updates √ºber WebSocket

### Modul 21: üîÑ **integration-layer Modul**

#### API Orchestration
- **Multi-API Management**: Koordination aller 4 Backend-APIs
- **Data Synchronization**: Cross-Project Data-Sync im Frontend
- **Real-time Updates**: WebSocket Hub f√ºr alle Real-time Data
- **Error Handling**: Unified Error-Handling f√ºr alle APIs

#### Cross-System Features
- **Unified Search**: Search across alle 4 Projekte
- **Cross-Project Analytics**: Combined Analytics aus allen Systemen
- **Event Correlation**: Cross-System Event-Display
- **Performance Correlation**: Unified Performance-Dashboard

### Modul 22: üåê **unified-api Modul**

#### Frontend API Gateway
- **Request Routing**: Smart Routing zu korrekten Backend-APIs
- **Response Aggregation**: Combining Data aus mehreren Backends
- **Caching Layer**: Frontend-side Caching f√ºr Performance
- **WebSocket Management**: Centralized WebSocket-Connection-Management

#### Authentication & Security (Single-User)
- **Simple Session Management**: Session-basierte Authentifizierung f√ºr mdoehler
- **Session Persistence**: Persistent Sessions across Browser-Refreshes
- **Internal API Access**: Direct Backend-Access ohne JWT-Komplexit√§t
- **HTTPS-Only**: Port 443 externe Erreichbarkeit, Security Headers (CORS, CSP)

---

## üîÑ **Cross-System Event Architecture**

### Event-Flow zwischen allen 22 Modulen
```
Event-Bus (Redis Pub/Sub):
‚îú‚îÄ‚îÄ aktienanalyse Events ‚Üí auswertung + verwaltung + data-web-app
‚îú‚îÄ‚îÄ auswertung Events ‚Üí aktienanalyse + verwaltung + data-web-app  
‚îú‚îÄ‚îÄ verwaltung Events ‚Üí aktienanalyse + auswertung + data-web-app
‚îî‚îÄ‚îÄ data-web-app Events ‚Üí aktienanalyse + auswertung + verwaltung
```

### Unified HTTPS Gateway (Port 443 - Externe Erreichbarkeit)
```
NGINX Reverse Proxy (nur Port 443 von au√üen):
‚îú‚îÄ‚îÄ / (Frontend)             ‚Üí data-web-app:8004 (React SPA)
‚îú‚îÄ‚îÄ /api/aktienanalyse/*     ‚Üí aktienanalyse:8001 (intern)
‚îú‚îÄ‚îÄ /api/auswertung/*        ‚Üí auswertung:8002 (intern)
‚îú‚îÄ‚îÄ /api/verwaltung/*        ‚Üí verwaltung:8003 (intern)
‚îî‚îÄ‚îÄ /ws/* (WebSocket)        ‚Üí event-bus:8005 (intern)

# Externe Erreichbarkeit: NUR Port 443 (HTTPS)
# Interne Services: Ports 8001-8005 (nicht extern erreichbar)
```

## üìä **Deployment-Architektur: Nativer LXC-Container (Keine Docker/Virtualisierung)**

### Single LXC Container - Native systemd Services
```
LXC aktienanalyse-lxc-120 (10.1.1.174):
‚îú‚îÄ‚îÄ üìà aktienanalyse-service (systemd, Port 8001)
‚îú‚îÄ‚îÄ üßÆ auswertung-service (systemd, Port 8002) 
‚îú‚îÄ‚îÄ üíº verwaltung-service (systemd, Port 8003)
‚îú‚îÄ‚îÄ üåê frontend-service (systemd, Port 8004)
‚îú‚îÄ‚îÄ üîÑ event-bus-service (systemd, Port 8005)
‚îú‚îÄ‚îÄ shared-infrastructure/ (native installiert)
‚îÇ   ‚îú‚îÄ‚îÄ redis-server (systemd)
‚îÇ   ‚îú‚îÄ‚îÄ nginx (systemd, Port 443 extern)
‚îÇ   ‚îú‚îÄ‚îÄ postgresql (systemd)
‚îÇ   ‚îî‚îÄ‚îÄ zabbix-agent (systemd)
‚îî‚îÄ‚îÄ üë§ Single-User: mdoehler (Linux User)

# KEINE Container-Virtualisierung (Docker/Podman)
# NUR native LXC mit systemd Services
# Externe Erreichbarkeit: NUR Port 443 (HTTPS)
```

Diese **vollst√§ndige Anforderungs√ºbersicht** deckt alle **4 Teilprojekte** mit **22 Modulen** ab und zeigt die komplette Integration des aktienanalyse-√∂kosystems.